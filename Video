import javafx.application.Application;
import javafx.scene.control.Button;
import javafx.stage.Stage;
import org.apache.commons.csv.CSVFormat;
import org.apache.commons.csv.CSVParser;
import org.apache.commons.csv.CSVPrinter;
import org.apache.commons.csv.CSVRecord;

import java.io.*;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.ArrayList;
import java.util.List;

/**
 * Applicazione per la riproduzione casuale di video.
 */
public class Video extends Application {

    // Lista degli URL dei video
    private List<String> elencoVideo = new ArrayList<>();
    // Indice dell'ultimo video riprodotto casualmente
    private int ultimoIndiceCasuale = -1;

    /**
     * Metodo principale per avviare l'applicazione.
     *
     * @param primaryStage Lo stage principale dell'applicazione.
     */
    @Override
    public void start(Stage primaryStage) {

        // Aggiunta degli URL dei video alla lista
        elencoVideo.add("C:\\percorso\\del\\video1.mp4");
        elencoVideo.add("C:\\percorso\\del\\video2.mp4");
        elencoVideo.add("C:\\percorso\\del\\video3.mp4");
        elencoVideo.add("C:\\percorso\\del\\video4.mp4");
        elencoVideo.add("C:\\percorso\\del\\video5.mp4");

        // Creazione di un pulsante per riprodurre un video casuale
        Button riproduciButton = new Button("Riproduci Video");
        riproduciButton.setOnAction(e -> videoCasuale());

        // Ciclo infinito che stampa i video riprodotti casualmente
        while (true) {
            int indiceCasuale = ottieniIndiceCasuale();
            System.out.println("Riproduzione di: Video " + (indiceCasuale + 1));
            try {
                Thread.sleep(1000); // Attende 1 secondo prima di riprodurre un altro video
            } catch (InterruptedException ex) {
                Thread.currentThread().interrupt();
            }
        }
    }

    /**
     * Metodo per ottenere un indice casuale dalla lista dei video.
     *
     * @return Indice casuale.
     */
    private int ottieniIndiceCasuale() {
        int indiceCasuale;
        int precedenteIndiceCasuale = ultimoIndiceCasuale;
        do {
            indiceCasuale = (int) (Math.random() * elencoVideo.size());
        } while (indiceCasuale == precedenteIndiceCasuale);
        ultimoIndiceCasuale = indiceCasuale;
        return indiceCasuale;
    }

    /**
     * Metodo per leggere da un file CSV.
     *
     * @param filePath Il percorso del file CSV da leggere.
     * @return Una lista di record CSV.
     * @throws IOException Se si verifica un errore durante la lettura del file.
     */
    private List<CSVRecord> leggiDaCSV(String filePath) throws IOException {
        Reader reader = Files.newBufferedReader(Paths.get(filePath));
        CSVParser csvParser = new CSVParser(reader, CSVFormat.DEFAULT);
        return csvParser.getRecords();
    }

    /**
     * Metodo per scrivere su un file CSV.
     *
     * @param filePath Il percorso del file CSV su cui scrivere.
     * @param records  I record da scrivere nel file CSV.
     * @throws IOException Se si verifica un errore durante la scrittura del file.
     */
    private void scriviSuCSV(String filePath, List<CSVRecord> records) throws IOException {
        Writer writer = new FileWriter(filePath);
        CSVPrinter csvPrinter = new CSVPrinter(writer, CSVFormat.DEFAULT);
        for (CSVRecord record : records) {
            csvPrinter.printRecord(record);
        }
        csvPrinter.flush();
    }

    /**
     * Metodo per riprodurre un video casuale.
     */
    private void videoCasuale() {
        // Implementazione della riproduzione di un video casuale
    }

    public static void main(String[] args) {
        launch(args);
    }
}
